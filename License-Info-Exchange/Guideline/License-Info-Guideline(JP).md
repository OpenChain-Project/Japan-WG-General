# License-Info-Gudeline (JP)

本文書は、組織間で授受されるオープン ソース ソフトウェア (Open Source Software, OSS)に関して、OSSコンプライアンスを遵守するために必要となるライセンス情報を作成するガイドラインを示します。応用分野としては、一般ユーザーに広範囲に配布（販売）される製品（組込み機器）を想定して記載していますが、他の分野でも応用可能です。


## 目次

1. ライセンス情報の必要性
1. 必要なライセンス情報の項目
1. ライセンス情報の収集方法
1. ライセンス情報の作成手順
1. ライセンス情報のサンプル

## 1. ライセンス情報の必要性 

現在、OSSは、ソフトウェア開発に必要不可欠なものとなっています。OSSは誰でも自由に利用する事が出来ますが、利用するためには一定の条件に従う必要があります。条件に従うためには、利用しているOSSのライセンス情報を把握することが必要です。

製品がサプライチェーン上でつながる複数企業によって開発される場合には、サプライチェーンでつながっている全ての企業が正確なライセンス情報を提供することが必要になります。サプライチェーン上で1社でもライセンス情報の提供を正確に提供することができない場合には、その企業より下流にある企業全てがOSSライセンスを遵守できなくなります。サプライチェーンに関係する担当者全員がOSSについて正しく理解して作業することによって、製品のOSSコンプライアンスが初めて遵守可能になります。

ライセンス情報の必要性についての詳細は、「オープンソースソフトウェアライセンス遵守に関する一般公衆ガイド」を参照して下さい。
https://github.com/OpenChain-Project/curriculum/tree/master/supplier-leaflet

組織間でOSSを授受する際に、同時に添付されるべきライセンス情報は、OSSコンプライアンスに関する情報を含む必要があります。これは、OSS名、バージョン等多岐に渡る情報で、しかもOSSライセンスによって必要となる情報が異なることから、担当者が正確に理解しないと、不十分な情報しか提供されない可能性があります。また、要求されるライセンス情報は企業によって異なることがあるため、提供側企業の担当者が混乱する可能性があります。

上記課題を解決するために、本文書は、必要十分で最低限のライセンス情報を定義し、作成手順を示すことで、簡単で正確なライセンス情報の生成が誰にでも可能となることを目指しています。また、必要十分で最低限のライセンス情報をSPDX Liteとして定義し、SPDX仕様に提案しています。以下では、簡単にSPDXおよびSPDX Liteについて説明します。


#### SPDX

ライセンス情報を扱うためには、Linux Foundation傘下のプロジェクトにSoftware Package Data Exchange (SPDX)があります。
https://spdx.org/

SPDXはソフトウェア パッケージに関連するソフトウェア名やバージョン、ライセンス、著作権表示などの情報を共有するための標準的なフォーマットです。

#### SPDX Lite

SPDXはライセンス情報を共有するために非常に優れたフォーマットです。
しかし、ツールによるライセンス情報のスキャンにより得られる情報は、えてして膨大なものとなり、一部手作業によるライセンス処理を含む実ビジネスにおいて、コンプライアンス維持の上で課題となっていることも事実です。
そこで、サプライチェーンにおけるライセンスへのコンプライアンス維持のために、必須であり、且つ最低限の定義を行うことが必要であると考え、SPDX Liteを定義しました。
実ビジネスで運用されていて実績のあるデータを集め、それらを、定義するために十分な内容としています。
したがって、ツールによるライセンス情報収集と並行して、手作業・目視によるライセンス情報授受が可能な項目をリストアップしています。

以下はSPDX-Liteのサンプルです。
spread sheetなどに必要なライセンス情報を入力するだけで簡単に作成する事が出来ます。

![spdx-lite](https://user-images.githubusercontent.com/21073492/59993340-ee596500-968a-11e9-8783-5cf9a95ee351.png)

#### SPDXとSPDX Liteの位置づけ

SPDX Liteの各タグは、手書き入力や人手による視認を行う際の作業を考慮し、必要な情報に厳選しています。
SPDXの定義で必須とされるタグについてはSPDX Liteでも含まれており、下記の特徴を持っています。

* 記載内容が厳選されている一方で必須なライセンス情報は含むため、議論のベース、初心者の誘導という点でSPDX Liteはベスト
* 一つのソフトウェア　パッケージに、一つのライセンス情報を記載する、平易な記載には、付加的な情報が含まれないSPDX Liteファイルを用いることで、人による可読性を維持できる
* Full SpecのSPDXからでもSPDX Liteは生成できる（相互互換性がある)ため、ライセンス情報収集ツールを用いたSPDX Liteファイル作成も容易にできる
* ソースコード以外にライセンスを決定する条件が存在する場合（例えば、コンパイルオプションで適用ライセンスが異なる場合）、Full SpecのSPDXよりもSPDX Liteによる記載の方が、ソフトウェア　パッケージ全体のライセンス情報に絞った記述となる分、曖昧性を回避できる。

当然ながら、SPDXフォーマットによるライセンス情報は、細やかな記載が可能であり、ソフトウェア　パッケージ全体に含まれる全てのソースコードの情報を詳細に記載することもできるため、目的に応じて、SPDXでもSPDX Liteでも、ビジネス当事者の議論で決めればよい、と言えます。

## 2. 必要なライセンス情報の項目

SPDX Liteの項目と各項目の必要な理由を以下に記載します。

### SPDX Liteの項目一覧
| # | corresponding SPDX section no. | License Info. |
|:-----|:----|:-----------------------|
|L1.1  |2.1  | SPDX Version           |
|L1.2  |2.2  | Data License           |
|L1.3  |2.3  | SPDX Identifier        |
|L1.4	 |2.4	 | Document Name	        | 
|L1.5	 |2.5	 | SPDX Document Namespace| 
|L1.6	 |2.8	 | Creator	              | 
|L1.7  |2.9  | Created                |
|L2.1	 |3.1	 | Package Name	          | 
|L2.2	 |3.2	 | Package SPDX Identifier| 
|L2.3	 |3.3	 | Package Version        | 
|L2.4	 |3.4	 | Package File Name      | 
|L2.5	 |3.7	 | Package Download Location | 
|L2.6	 |3.8	 | Files Analyzed         | 
|L2.7  |3.11 | Package Home Page      | 
|L2.8	 |3.13 | Concluded License      | 
|L2.9	 |3.15 | Declared License       | 
|L2.10 |3.16 | Comments on License    | 
|L2.11 |3.17 | Copyright Text         | 
|L2.12 |3.20 | Package Comment        | 
|L3.1	 |6.1	 | License Identifier     | 
|L3.2	 |6.2	 | Extracted Text         | 
|L3.3	 |6.3	 | License Name           | 
|L3.4	 |6.5	 | License Comment        | 


### Package Name

ソフトウェア パッケージの名称を記載します。  
本項目は使用しているソフトウェアを特定するために利用します。

フィールド選択の背景・論拠:

### Package SPDX Identifier

SPDX Liteファイルの中でソフトウェア パッケージが一意になる識別子を記載します。  
本項目は同一ソフトウェア パッケージの別バージョンと区別するために利用します。

### Package Version

ソフトウェア パッケージのバージョンを記載します。  
本項目は使用しているソフトウェアのバージョンを特定するために利用します。

### Package File Name

ソフトウェア パッケージの実ファイル名を記載します。  
本項目は使用しているソフトウェアの実ファイルを特定するために利用します。
これはPackage Nameと実ファイルが名称の違いにより、関連付け出来ない場合があるため本項目を必要とします。

### Package Download Location

ソフトウェア パッケージの入手先を記載します。  
本項目は使用しているソフトウェアと同じソフトウェアを入手するために利用します。

### Files Analyzed 

SPDX Liteファイルを手作業で作成する場合に"false"を記載します。

### Package Home Page

ソフトウェア パッケージのホームページを記載します。  
本項目は使用しているソフトウェアの脆弱性情報などのコミュニティ情報を入手するために利用します。

### Concluded License

SPDX Liteファイルの作成者がソフトウェア パッケージに適用されると結論したライセンスを記載します。
Concluded LicenseがDeclared Licenseと異なる場合、Comments on Licenseに説明を記載すべきです。
NOASSERTIONに関しては、Comments on Licenseに説明を記載した方が良いです。
本項目は使用しているソフトウェアのライセンスを特定するために利用します。

なお、記載するライセンス名は下記URLのSPDX License ListのIdentifierに従って記載する事を推奨します。
https://spdx.org/licenses/

### Declared License

ソフトウェア パッケージの作成者が宣言したライセンスを記載します。
Concluded LicenseがDeclared Licenseと異なる場合、Comments on Licenseに説明を記載すべきです。
NOASSERTIONに関しては、Comments on Licenseに説明を記載した方が良いです。
本項目は使用しているソフトウェアのライセンスを特定するために利用します。

なお、記載するライセンス名は下記URLのSPDX License ListのIdentifierに従って記載する事を推奨します。
https://spdx.org/licenses/

### Comments on License

SPDX Liteファイルの作成者がライセンスに関連する情報やライセンスを結論した理由を記載します。
本項目は使用しているソフトウェアのライセンスを補足するために利用します。  

このタグには、「"Concluded License"記載の論拠」などライセンスに関わる情報に絞って記載されます。

### Copyright Text

ソフトウェア パッケージの著作権情報を記載します。  
すべての著作権情報を抽出する事が難しい場合はソースコードを一緒に提供します。

特定のライセンスでは配布時に著作権情報を提供する必要があります。本項目は使用しているソフトウェアの著作権情報を特定するために利用します。


### License Identifier

SPDX License Listに掲載されていないライセンスの場合、一意になる識別子を記載します。  
本項目は使用しているソフトウェアのライセンスを特定するために利用します。

### Extracted Text

SPDX License Listに掲載されていないライセンスの場合、ライセンス条文を記載します。  
本項目は使用しているソフトウェアのライセンスを補足するために利用します。

### License Name

SPDXライセンス リストに掲載されていないライセンスの場合、ライセンス名を記載します。  
本項目は使用しているソフトウェアのライセンス名を特定するために利用します。

### License Comment

SPDXライセンス リストに掲載されていないライセンスの場合、ライセンスに関連する情報を記載します。  
本項目は使用しているソフトウェアのライセンスを補足するために利用します。

### Package Comment

ソフトウェア　パッケージに関する、追加情報を記載します。
SPDX Liteでは、このタグに、以下のような情報が収められることを想定しています。


#### modification record

ソフトウェア パッケージが改変されている場合は”true”を記載します。  
ソフトウェア パッケージが改変されていない場合は”false”を記載します。  

OSSのソースコードに独自の修正を加えたり、OSSのソースコードを一部流用する場合は改変されていると判断するため”true”を記載します。

この項目はSPDXには存在しません。SPDX Liteの独自の項目です。  
特定のライセンスではソフトウェアを改変した時に従う必要があるライセンス条件があります。そのため、ソフトウェアの改変を明示するために本項目を利用します。
ソフトウェア　パッケージが、『「Package Download Location」に記載された入手先からダウンロードしたソフトウェアそのものと、それに対するパッチファイル』が、それぞれ別個のSPDX Liteファイルで分離管理され、コンパイル段階でパッチが適用されているならば、ソフトウェア　パッケージとして提供されるコンパイル前のソフトウェアは、改変されておらず"false"として記載されることになります。

#### compile options

コンパイル オプションによって、使用しているソフトウェアの特定のライセンスが対象外となる場合、本項目にコンパイル オプションを記載します。  

#### link methodology

特定のライセンスではソフトウェアのリンク方法によって、他にも影響を与えます。そのため、ソフトウェアのリンク方法を明示するために本項目を利用します。
ソフトウェア　パッケージに含まれるソフトウェアが動的リンク又は静的リンクのどちらを用いているかを記載します。  


### 備考

記載出来ない項目については"NOASSERTION"を記載して、使用しているソフトウェア パッケージについて問い合わせ可能な連絡先を提供します。

## 3. ライセンス情報の収集方法

#### Package Name, Package Version, Package File Name

対象のソースコード又はソフトウェア パッケージを入手してください。

#### Package Download Location

入手した対象のソースコード又はソフトウェア パッケージの取得先を確認してください。
納品でCDなど物理デバイスから入手した時は納品先に取得元を確認してください。

#### Package Home Page

特定したPackage Nameを元にインターネットで検索してください。
ホームページが複数見つかる場合はソースコードの入手先やバージョンと照らし合わせて確認してください。

#### Concluded License, Declared License

入手したソースコード内の「COPYING」,「LICENSE」,「README」などのファイルや各ソースファイルのヘッダー部分を確認してください。
又は特定したホームページ内にライセンスの情報があるか確認してください。


## 4. ライセンス情報の作成手順

ライセンス情報は分かる範囲で出来る限り記載する事が大切です。
ソフトウェアサプライチェーンにおいて、ライセンス情報を受け取る側はライセンスを遵守するために少しでも多くの情報を必要とします。そのため、明確でない場合も出来る限りのライセンス情報を記載してコメントに明確でない旨を記載する事を推奨します。

### 手作業でバイナリファイルを対象に作成する場合

※要追記

### 手作業でソースコードを対象に作成する場合

例としてbusybox-1.30.1のライセンス情報を手作業で作成する手順を以下に記載します。
ここではbusybox-1.30.1のソースコードの「busybox-1.30.1.tar.bz2」が入手済みである事を想定します。

#### Package Name
 -> busybox
 
  入手したソースコードのファイル名やソースコード内の「README」から判断して記載します。

#### Package SPDX Identifier
 -> SPDXRef-1
 
  一意に識別するために任意の文字列を記載します。

#### Package Version
 -> 1.30.1
 
  入手したソースコードのファイル名から判断して記載します。

#### Package File Name
 -> busybox-1.30.1.tar.bz2
 
  入手したソースコードのファイル名から判断して記載します。

#### Package Download Location
 -> https://busybox.net/downloads/busybox-1.30.1.tar.bz2
 
  ソースコードの入手先のURLを記載します。

#### Files Analyzed
 -> false
 
  手作業で作成しているためfalseを記載します。

#### Package Home Page
 -> https://busybox.net/about.html
 
  インターネットでbusyboxのホームページを検索して記載します。

#### Concluded License
 ->  GPL-2.0-only
 
  ソースコード内の「LICENSE」やホームページ内から判断して記載します。

#### Declared License
 -> GPL-2.0-only
 
  ソースコード内の「LICENSE」やホームページ内から判断して記載します。

#### Comments on License
 -> busyboxは他のソフトウェアとはリンクせず、コマンドのみを使用します
 
  ライセンス情報の補足を記載する。またリンクの有無を記載します。

#### Copyright Text
 -> NOASSERTION
 
  すべての著作権表示を抽出する事が難しいため、NOASSERTIONを記載して一緒にソースコードを提供します。

#### modification record
 -> false
 
  改変せずに使用するためfalseを記載します。

#### License Identifier, Extracted Text, License Name, License Comment

SPDXライセンス リストに掲載されていないライセンスは無いため、本項目は記載しません。

## 5. ライセンス情報のサンプル

#### OSS単独の構成
例)SPDX tools
https://github.com/OpenChain-Project/Japan-WG-General/blob/master/License-Info-Exchange/SPDX-Lite-sample/SPDXtools-SPDXLite.txt

#### 受託開発の納品物でOSSを利用している構成
#### 組込み製品でOSSを活用している構成
例)Linux kernelソースコードの入手先が変わる一例
https://github.com/OpenChain-Project/Japan-WG-General/blob/master/License-Info-Exchange/SPDX-Lite-sample/SPDXLite_ソース入手先が変わるパターン.pptx
#### サプライチェーンで受け渡す際の構成

